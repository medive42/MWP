CKEDITOR.plugins.add("wpmedialibrary",{init:function(e){e.addCommand("insertMediaLibrary",{exec:function(e){return console.log(jQuery(".metaslider-active").length),jQuery(".metaslider-active").length?(file_frame=wp.media.frames.file_frame=wp.media({multiple:!1,frame:"post",library:{type:"image"},button:{text:metasliderpro.insertIntoLayer}}),file_frame.on("insert",function(){var i=file_frame.state().get("selection");i.map(function(i){i=i.toJSON(),e.insertHtml("<img style='max-height: 100%' src='"+i.url+"' alt='"+i.alt+"' />")})}),void file_frame.open()):void alert(metasliderpro.noLayerSelected)}}),e.ui.addButton("Media Library",{label:metasliderpro.insertFromMediaLibrary,command:"insertMediaLibrary",icon:this.path+"images/wpmedialibrary.png"})}});