window.CodeMirror=function(){"use strict";function e(l,u){function f(e){tn.onDragEvent&&tn.onDragEvent(or,T(e))||N(e)}function g(e){return e>=0&&e<Tn.size}function m(e){return C(Tn,e)}function M(e,t){In=!0;for(var n=t-e.height,r=e;r;r=r.parent)r.height+=n}function L(e,t){return e.styles||e.highlight(Sn,e.stateAfter=jt(b(e)),tn.tabSize),e.getContent(tn.tabSize,t,tn.lineWrapping)}function O(e){var t={line:0,ch:0};We(t,{line:Tn.size-1,ch:m(Tn.size-1).text.length},ke(e),t,t),Dn=!0}function X(e){var t=[];return Tn.iter(0,Tn.size,function(e){t.push(e.text)}),t.join(e||"\n")}function Q(e){Math.abs(sn.scrollTop-Un)>1&&(Un=xn.scrollTop=sn.scrollTop,et([]))}function ee(e){tn.fixedGutter&&mn.style.left!=xn.scrollLeft+"px"&&(mn.style.left=xn.scrollLeft+"px"),Math.abs(xn.scrollTop-Un)>1&&(Un=xn.scrollTop,sn.scrollTop!=Un&&(sn.scrollTop=Un),et([])),tn.onScroll&&tn.onScroll(or)}function re(e){function t(t){ce&&(xn.draggable=!1),Wn=!1,h(),d(),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(A(t),ut(l.line,l.ch,!0),je())}function n(e){if("single"==s)lt(l,e);else if("double"==s){var t=mt(e);F(e,p)?lt(t.from,g):lt(p,t.to)}else"triple"==s&&(F(e,p)?lt(g,ct({line:e.line,ch:0})):lt(p,ct({line:e.line+1,ch:0})))}function r(e){var t=Vt(e,!0);if(t&&!U(t,c)){kn||Ne(),c=t,n(t),Dn=!1;var i=Qe();(t.line>=i.to||t.line<i.from)&&(f=setTimeout(Qt(function(){r(e)}),150))}}function i(e){clearTimeout(f);var t=Vt(e);t&&n(t),A(e),je(),Dn=!0,m(),h()}ot(D(e,"shiftKey"));for(var o=E(e);o!=Cn;o=o.parentNode)if(o.parentNode==yn&&o!=vn)return;for(var o=E(e);o!=Cn;o=o.parentNode)if(o.parentNode==gn)return tn.onGutterClick&&tn.onGutterClick(or,Z(gn.childNodes,o)+$n,e),A(e);var l=Vt(e);switch(W(e)){case 3:return void(le&&Gt(e));case 2:return l&&ut(l.line,l.ch,!0),setTimeout(je,20),void A(e)}if(!l)return void(E(e)==xn&&A(e));kn||Ne();var a=+new Date,s="single";if(En&&En.time>a-400&&U(En.pos,l))s="triple",A(e),setTimeout(je,20),vt(l.line);else if(Nn&&Nn.time>a-400&&U(Nn.pos,l)){s="double",En={time:a,pos:l},A(e);var u=mt(l);lt(u.from,u.to)}else Nn={time:a,pos:l};var f,c=l;if(tn.dragDrop&&xe&&!tn.readOnly&&!U(Kn.from,Kn.to)&&!F(l,Kn.from)&&!F(Kn.to,l)&&"single"==s){ce&&(xn.draggable=!0);var h=z(document,"mouseup",Qt(t),!0),d=z(xn,"drop",Qt(t),!0);return Wn=!0,void(xn.dragDrop&&xn.dragDrop())}A(e),"single"==s&&ut(l.line,l.ch,!0);var p=Kn.from,g=Kn.to,m=z(document,"mousemove",Qt(function(e){clearTimeout(f),A(e),ae||W(e)?r(e):i(e)}),!0),h=z(document,"mouseup",Qt(i),!0)}function he(e){for(var t=E(e);t!=Cn;t=t.parentNode)if(t.parentNode==gn)return A(e);A(e)}function pe(e){if(!tn.onDragEvent||!tn.onDragEvent(or,T(e))){A(e);var t=Vt(e,!0),n=e.dataTransfer.files;if(t&&!tn.readOnly)if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,i=Array(r),o=0,l=function(e,n){var l=new FileReader;l.onload=function(){i[n]=l.result,++o==r&&(t=ct(t),Qt(function(){var e=Pe(i.join(""),t,t);lt(t,e)})())},l.readAsText(e)},a=0;a<r;++a)l(n[a],a);else{if(Wn&&!F(t,Kn.from)&&!F(Kn.to,t))return;try{var i=e.dataTransfer.getData("Text");i&&en(function(){var e=Kn.from,n=Kn.to;lt(t,t),Wn&&Pe("",e,n),Ke(i),je()})}catch(e){}}}}function ve(e){var t=Ve();e.dataTransfer.setData("Text",t),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(G("img"),0,0)}function Ce(e,t){if("string"==typeof e&&(e=ie[e],!e))return!1;var n=Ln;try{tn.readOnly&&(Vn=!0),t&&(Ln=null),e(or)}catch(r){if(r!=ye)throw r;return!1}finally{Ln=n,Vn=!1}return!0}function be(e){function i(){f=!0}var o=t(tn.keyMap),l=o.auto;clearTimeout(ir),l&&!r(e)&&(ir=setTimeout(function(){t(tn.keyMap)==o&&(tn.keyMap=l.call?l.call(null,or):l)},50));var a=Me[D(e,"keyCode")],s=!1,u=de&&q;if(null==a||e.altGraphKey)return!1;D(e,"altKey")&&(a="Alt-"+a),D(e,u?"metaKey":"ctrlKey")&&(a="Ctrl-"+a),D(e,u?"ctrlKey":"metaKey")&&(a="Cmd-"+a);var f=!1;return s=D(e,"shiftKey")?n("Shift-"+a,tn.extraKeys,tn.keyMap,function(e){return Ce(e,!0)},i)||n(a,tn.extraKeys,tn.keyMap,function(e){if("string"==typeof e&&/^go[A-Z]/.test(e))return Ce(e)},i):n(a,tn.extraKeys,tn.keyMap,Ce,i),f&&(s=!1),s&&(A(e),Yt(),ue&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),s}function Se(e,t){var r=n("'"+t+"'",tn.extraKeys,tn.keyMap,function(e){return Ce(e,!0)});return r&&(A(e),Yt()),r}function Te(e){if(kn||Ne(),ae&&27==e.keyCode&&(e.returnValue=!1),qn&&$e()&&(qn=!1),!tn.onKeyEvent||!tn.onKeyEvent(or,T(e))){var t=D(e,"keyCode");ot(16==t||D(e,"shiftKey"));var n=be(e);de&&(lr=n?t:null,!n&&88==t&&D(e,q?"metaKey":"ctrlKey")&&Ke(""))}}function Ae(e){if(qn&&$e(),!tn.onKeyEvent||!tn.onKeyEvent(or,T(e))){var t=D(e,"keyCode"),n=D(e,"charCode");if(de&&t==lr)return lr=null,void A(e);if(!(de&&(!e.which||e.which<10)||ge)||!be(e)){var r=String.fromCharCode(null==n?t:n);tn.electricChars&&Sn.electricChars&&tn.smartIndent&&!tn.readOnly&&Sn.electricChars.indexOf(r)>-1&&setTimeout(Qt(function(){xt(Kn.to.line,"smart")}),75),Se(e,r)||Ye()}}}function Le(e){tn.onKeyEvent&&tn.onKeyEvent(or,T(e))||16==D(e,"keyCode")&&(Ln=null)}function Ne(){"nocursor"!=tn.readOnly&&(kn||(tn.onFocus&&tn.onFocus(or),kn=!0,xn.className.search(/\bCodeMirror-focused\b/)==-1&&(xn.className+=" CodeMirror-focused")),Ge(),Yt())}function Ee(){kn&&(tn.onBlur&&tn.onBlur(or),kn=!1,Pn&&Qt(function(){Pn&&(Pn(),Pn=null)})(),xn.className=xn.className.replace(" CodeMirror-focused","")),clearInterval(bn),setTimeout(function(){kn||(Ln=null)},150)}function We(e,t,n,r,i){if(!Vn){var o=[];if(Tn.iter(e.line,t.line+1,function(e){o.push(p(e.text,e.markedSpans))}),er)for(er.addChange(e.line,n.length,o);er.done.length>tn.undoDepth;)er.done.shift();var l=c(d(o[0]),d(P(o)),e.ch,t.ch,n);Oe(e,t,l,r,i)}}function De(e,t){if(e.length){for(var n=e.pop(),r=[],i=n.length-1;i>=0;i-=1){var o=n[i],l=[],a=o.start+o.added;Tn.iter(o.start,a,function(e){l.push(p(e.text,e.markedSpans))}),r.push({start:o.start,added:o.old.length,old:l});var s={line:o.start+o.old.length-1,ch:j(h(P(l)),h(P(o.old)))};Oe({line:o.start,ch:0},{line:a-1,ch:m(a-1).text.length},o.old,s,s)}Dn=!0,t.push(r)}}function ze(){De(er.done,er.undone)}function He(){De(er.undone,er.done)}function Oe(e,t,n,r,i){function o(e){return e<=Math.min(t.line,t.line+C)?e:e+C}if(!Vn){var l=!1,a=Zn.text.length;tn.lineWrapping||Tn.iter(e.line,t.line+1,function(e){if(!e.hidden&&e.text.length==a)return l=!0,!0}),(e.line!=t.line||n.length>1)&&(In=!0);var s=t.line-e.line,u=m(e.line),f=m(t.line),c=P(n);if(0==e.ch&&0==t.ch&&""==h(c)){for(var p=[],g=0,y=n.length-1;g<y;++g)p.push(new v(h(n[g]),d(n[g])));f.update(f.text,d(c)),s&&Tn.remove(e.line,s,Bn),p.length&&Tn.insert(e.line,p)}else if(u==f)if(1==n.length)u.update(u.text.slice(0,e.ch)+h(n[0])+u.text.slice(t.ch),d(n[0]));else{for(var p=[],g=1,y=n.length-1;g<y;++g)p.push(new v(h(n[g]),d(n[g])));p.push(new v(h(c)+u.text.slice(t.ch),d(c))),u.update(u.text.slice(0,e.ch)+h(n[0]),d(n[0])),Tn.insert(e.line+1,p)}else if(1==n.length)u.update(u.text.slice(0,e.ch)+h(n[0])+f.text.slice(t.ch),d(n[0])),Tn.remove(e.line+1,s,Bn);else{var p=[];u.update(u.text.slice(0,e.ch)+h(n[0]),d(n[0])),f.update(h(c)+f.text.slice(t.ch),d(c));for(var g=1,y=n.length-1;g<y;++g)p.push(new v(h(n[g]),d(n[g])));s>1&&Tn.remove(e.line+1,s-1,Bn),Tn.insert(e.line+1,p)}if(tn.lineWrapping){var x=Math.max(5,xn.clientWidth/Kt()-3);Tn.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/x)||1;t!=e.height&&M(e,t)}})}else Tn.iter(e.line,e.line+n.length,function(e){var t=e.text;!e.hidden&&t.length>a&&(Zn=e,a=t.length,Jn=!0,l=!1)}),l&&(_n=!0);An=Math.min(An,e.line),_t(400);var C=n.length-s-1;if(Hn.push({from:e.line,to:t.line+1,diff:C}),tn.onChange){for(var g=0;g<n.length;++g)"string"!=typeof n[g]&&(n[g]=n[g].text);var b={from:e,to:t,text:n};if(On){for(var S=On;S.next;S=S.next);S.next=b}else On=b}at(ct(r),ct(i),o(Kn.from.line),o(Kn.to.line))}}function Re(){var e=Tn.height*Pt()+2*Ut();return.99*e>xn.offsetHeight&&e}function Ie(e){var t=Re();sn.style.display=t?"block":"none",t?(an.style.height=yn.style.minHeight=t+"px",sn.style.height=xn.clientHeight+"px",null!=e&&(sn.scrollTop=xn.scrollTop=e,ce&&setTimeout(function(){sn.scrollTop==e&&(sn.scrollTop=e+(e?-1:1),sn.scrollTop=e)},0))):yn.style.minHeight="",vn.style.top=Yn*Pt()+"px"}function Be(){Zn=m(0),Jn=!0;var e=Zn.text.length;Tn.iter(1,Tn.size,function(t){var n=t.text;!t.hidden&&n.length>e&&(e=n.length,Zn=t)}),_n=!1}function Pe(e,t,n){function r(r){if(F(r,t))return r;if(!F(n,r))return i;var o=r.line+e.length-(n.line-t.line)-1,l=r.ch;return r.line==n.line&&(l+=P(e).length-(n.ch-(n.line==t.line?t.ch:0))),{line:o,ch:l}}t=ct(t),n=n?ct(n):t,e=ke(e);var i;return Ue(e,t,n,function(e){return i=e,{from:r(Kn.from),to:r(Kn.to)}}),i}function Ke(e,t){Ue(ke(e),Kn.from,Kn.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:Kn.from,to:Kn.from}:{from:Kn.from,to:e}})}function Ue(e,t,n,r){var i=1==e.length?e[0].length+t.ch:P(e).length,o=r({line:t.line+e.length-1,ch:i});We(t,n,e,o.from,o.to)}function Fe(e,t,n){var r=e.line,i=t.line;if(r==i)return m(r).text.slice(e.ch,t.ch);var o=[m(r).text.slice(e.ch)];return Tn.iter(r+1,i,function(e){o.push(e.text)}),o.push(m(i).text.slice(0,t.ch)),o.join(n||"\n")}function Ve(e){return Fe(Kn.from,Kn.to,e)}function Ge(){qn||wn.set(tn.pollInterval,function(){$e(),kn&&Ge()})}function Ye(){function e(){var n=$e();n||t?(qn=!1,Ge()):(t=!0,wn.set(60,e))}var t=!1;qn=!0,wn.set(20,e)}function $e(){if(!kn||we(on)||tn.readOnly)return!1;var e=on.value;if(e==ar)return!1;gr||Jt(),Ln=null;for(var t=0,n=Math.min(ar.length,e.length);t<n&&ar[t]==e[t];)++t;return t<ar.length?Kn.from={line:Kn.from.line,ch:Kn.from.ch-(ar.length-t)}:Fn&&U(Kn.from,Kn.to)&&!Gn&&(Kn.to={line:Kn.to.line,ch:Math.min(m(Kn.to.line).text.length,Kn.to.ch+(e.length-t))}),Ke(e.slice(t),"end"),e.length>1e3?on.value=ar="":ar=e,gr||qt(),Gn=!1,!0}function Xe(e){U(Kn.from,Kn.to)?e&&(ar=on.value=""):(ar="",on.value=Ve(),kn&&K(on))}function je(){"nocursor"!=tn.readOnly&&on.focus()}function Ze(){var e=_e();if(Je(e.x,e.y,e.x,e.yBot),kn){var t=yn.getBoundingClientRect(),n=null;if(e.y+t.top<0?n=!0:e.y+t.top+Pt()>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n){var r="none"==cn.style.display;r&&(cn.style.display="",cn.style.left=e.x+"px",cn.style.top=e.y-Yn+"px"),cn.scrollIntoView(n),r&&(cn.style.display="none")}}}function _e(){var e=Rt(Kn.inverted?Kn.from:Kn.to),t=tn.lineWrapping?Math.min(e.x,pn.offsetWidth):e.x;return{x:t,y:e.y,yBot:e.yBot}}function Je(e,t,n,r){var i=qe(e,t,n,r);null!=i.scrollLeft&&(xn.scrollLeft=i.scrollLeft),null!=i.scrollTop&&(sn.scrollTop=xn.scrollTop=i.scrollTop)}function qe(e,t,n,r){var i=Ft(),o=Ut();t+=o,r+=o,e+=i,n+=i;var l=xn.clientHeight,a=sn.scrollTop,s={},u=Re()||1/0,f=t<o+10,c=r+o>u-10;t<a?s.scrollTop=f?0:Math.max(0,t):r>a+l&&(s.scrollTop=(c?u:r)-l);var h=xn.clientWidth,d=xn.scrollLeft,p=tn.fixedGutter?mn.clientWidth:0,g=e<p+i+10;return e<d+p||g?(g&&(e=0),s.scrollLeft=Math.max(0,e-10-p)):n>h+d-3&&(s.scrollLeft=n+10-h),s}function Qe(e){var t=Pt(),n=(null!=e?e:sn.scrollTop)-Ut(),r=Math.max(0,Math.floor(n/t)),i=Math.ceil((n+xn.clientHeight)/t);return{from:S(Tn,r),to:S(Tn,i)}}function et(e,t,n){function r(){var e=un.firstChild,t=!1;return Tn.iter($n,Xn,function(n){if(e){if(!n.hidden){var r=Math.round(e.offsetHeight/c)||1;n.height!=r&&(M(n,r),In=t=!0)}e=e.nextSibling}}),t}if(!xn.clientWidth)return void($n=Xn=Yn=0);var i=Qe(n);if(e!==!0&&0==e.length&&i.from>$n&&i.to<Xn)return void Ie(n);var o=Math.max(i.from-100,0),l=Math.min(Tn.size,i.to+100);$n<o&&o-$n<20&&(o=$n),Xn>l&&Xn-l<20&&(l=Math.min(Tn.size,Xn));for(var a=e===!0?[]:tt([{from:$n,to:Xn,domStart:0}],e),s=0,u=0;u<a.length;++u){var f=a[u];f.from<o&&(f.domStart+=o-f.from,f.from=o),f.to>l&&(f.to=l),f.from>=f.to?a.splice(u--,1):s+=f.to-f.from}if(s==l-o&&o==$n&&l==Xn)return void Ie(n);a.sort(function(e,t){return e.domStart-t.domStart});var c=Pt(),h=mn.style.display;un.style.display="none",nt(o,l,a),un.style.display=mn.style.display="";var d=o!=$n||l!=Xn||jn!=xn.clientHeight+c;if(d&&(jn=xn.clientHeight+c),(o!=$n||l!=Xn&&tn.onViewportChange)&&setTimeout(function(){tn.onViewportChange&&tn.onViewportChange(or,o,l)}),$n=o,Xn=l,Yn=k(Tn,o),_t(100),un.childNodes.length!=Xn-$n)throw new Error("BAD PATCH! "+JSON.stringify(a)+" size="+(Xn-$n)+" nodes="+un.childNodes.length);return tn.lineWrapping&&r(),mn.style.display=h,(d||In)&&rt()&&tn.lineWrapping&&r()&&rt(),Ie(n),it(),!t&&tn.onUpdate&&tn.onUpdate(or),!0}function tt(e,t){for(var n=0,r=t.length||0;n<r;++n){for(var i=t[n],o=[],l=i.diff||0,a=0,s=e.length;a<s;++a){var u=e[a];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l,domStart:u.domStart}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from,domStart:u.domStart}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l,domStart:u.domStart+(i.to-u.from)}))}e=o}return e}function nt(e,t,n){function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var i=0,o=un.firstChild,l=0;l<n.length;++l){for(var a=n[l];a.domStart>i;)o=r(o),i++;for(var s=0,u=a.to-a.from;s<u;++s)o=o.nextSibling,i++}for(;o;)o=r(o)}else Y(un);var f=n.shift(),o=un.firstChild,s=e;Tn.iter(e,t,function(e){if(f&&f.to==s&&(f=n.shift()),!f||f.from>s){if(e.hidden)var t=G("pre");else{var t=L(e);if(e.className&&(t.className=e.className),e.bgClassName){var r=G("pre"," ",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");t=G("div",[r,t],null,"position: relative")}}un.insertBefore(t,o)}else o=o.nextSibling;++s})}function rt(){if(tn.gutter||tn.lineNumbers){var e=vn.offsetHeight,t=xn.clientHeight;mn.style.height=(e-t<2?t:e)+"px";var n,r=document.createDocumentFragment(),i=$n;if(Tn.iter($n,Math.max(Xn,$n+1),function(e){if(e.hidden)r.appendChild(G("pre"));else{var t=e.gutterMarker,o=tn.lineNumbers?tn.lineNumberFormatter(i+tn.firstLineNumber):null;t&&t.text?o=t.text.replace("%N%",null!=o?o:""):null==o&&(o=" ");var l=r.appendChild(G("pre",null,t&&t.style));l.innerHTML=o;for(var a=1;a<e.height;++a)l.appendChild(G("br")),l.appendChild(document.createTextNode(" "));t||(n=i)}++i}),mn.style.display="none",$(gn,r),null!=n&&tn.lineNumbers){for(var o=gn.childNodes[n-$n],l=String(Tn.size).length,a=I(o.firstChild),s="";a.length+s.length<l;)s+=" ";s&&o.insertBefore(document.createTextNode(s),o.firstChild)}mn.style.display="";var u=Math.abs((parseInt(pn.style.marginLeft)||0)-mn.offsetWidth)>2;return pn.style.marginLeft=mn.offsetWidth+"px",In=!1,u}}function it(){var e=U(Kn.from,Kn.to),t=Rt(Kn.from,!0),n=e?t:Rt(Kn.to,!0),r=Kn.inverted?t:n,i=Pt(),o=R(Cn),l=R(un);if(ln.style.top=Math.max(0,Math.min(xn.offsetHeight,r.y+l.top-o.top))+"px",ln.style.left=Math.max(0,Math.min(xn.offsetWidth,r.x+l.left-o.left))+"px",e)cn.style.top=r.y+"px",cn.style.left=(tn.lineWrapping?Math.min(r.x,pn.offsetWidth):r.x)+"px",cn.style.display="",fn.style.display="none";else{var a=t.y==n.y,s=document.createDocumentFragment(),u=pn.clientWidth||pn.offsetWidth,f=pn.clientHeight||pn.offsetHeight,c=function(e,t,n,r){var i=fe?"width: "+(n?u-n-e:u)+"px":"right: "+n+"px";s.appendChild(G("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; "+i+"; height: "+r+"px"))};if(Kn.from.ch&&t.y>=0){var h=a?u-n.x:0;c(t.x,t.y,h,i)}var d=Math.max(0,t.y+(Kn.from.ch?i:0)),p=Math.min(n.y,f)-d;p>.2*i&&c(0,d,0,p),a&&Kn.from.ch||!(n.y<f-.5*i)||c(0,n.y,u-n.x,i),$(fn,s),cn.style.display="none",fn.style.display=""}}function ot(e){Ln=e?Ln||(Kn.inverted?Kn.to:Kn.from):null}function lt(e,t){var n=Ln&&ct(Ln);n&&(F(n,e)?e=n:F(t,n)&&(t=n)),at(e,t),zn=!0}function at(e,t,n,r){if(Qn=null,null==n&&(n=Kn.from.line,r=Kn.to.line),!U(Kn.from,e)||!U(Kn.to,t)){if(F(t,e)){var i=t;t=e,e=i}if(e.line!=n){var o=st(e,n,Kn.from.ch);o?e=o:zt(e.line,!1)}if(t.line!=r&&(t=st(t,r,Kn.to.ch)),U(e,t)?Kn.inverted=!1:U(e,Kn.to)?Kn.inverted=!1:U(t,Kn.from)&&(Kn.inverted=!0),tn.autoClearEmptyLines&&U(Kn.from,Kn.to)){var l=Kn.inverted?e:t;if(l.line!=Kn.from.line&&Kn.from.line<Tn.size){var a=m(Kn.from.line);/^\s+$/.test(a.text)&&setTimeout(Qt(function(){if(a.parent&&/^\s+$/.test(a.text)){var e=b(a);Pe("",{line:e,ch:0},{line:e,ch:a.text.length})}},10))}}Kn.from=e,Kn.to=t,Rn=!0}}function st(e,t,n){function r(t){for(var r=e.line+t,i=1==t?Tn.size:-1;r!=i;){var l=m(r);if(!l.hidden){var a=e.ch;return(o||a>n||a>l.text.length)&&(a=l.text.length),{line:r,ch:a}}r+=t}}var i=m(e.line),o=e.ch==i.text.length&&e.ch!=n;return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function ut(e,t,n){var r=ct({line:e,ch:t||0});(n?lt:at)(r,r)}function ft(e){return Math.max(0,Math.min(e,Tn.size-1))}function ct(e){if(e.line<0)return{line:0,ch:0};if(e.line>=Tn.size)return{line:Tn.size-1,ch:m(Tn.size-1).text.length};var t=e.ch,n=m(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:t<0?{line:e.line,ch:0}:e}function ht(e,t){function n(){for(var t=o+e,n=e<0?-1:Tn.size;t!=n;t+=e){var r=m(t);if(!r.hidden)return o=t,a=r,!0}}function r(t){if(l==(e<0?0:a.text.length)){if(t||!n())return!1;l=e<0?a.text.length:0}else l+=e;return!0}var i=Kn.inverted?Kn.from:Kn.to,o=i.line,l=i.ch,a=m(o);if("char"==t)r();else if("column"==t)r(!0);else if("word"==t)for(var s=!1;!(e<0)||r();){if(_(a.text.charAt(l)))s=!0;else if(s){e<0&&(e=1,r());break}if(e>0&&!r())break}return{line:o,ch:l}}function dt(e,t){var n=e<0?Kn.from:Kn.to;(Ln||U(Kn.from,Kn.to))&&(n=ht(e,t)),ut(n.line,n.ch,!0)}function pt(e,t){U(Kn.from,Kn.to)?e<0?Pe("",ht(e,t),Kn.to):Pe("",Kn.from,ht(e,t)):Pe("",Kn.from,Kn.to),zn=!0}function gt(e,t){var n=Rt(Kn.inverted?Kn.from:Kn.to,!0);if(null!=Qn&&(n.x=Qn),"page"==t)var r=Math.min(xn.clientHeight,window.innerHeight||document.documentElement.clientHeight),i=It(n.x,n.y+r*e);else if("line"==t)var o=Pt(),i=It(n.x,n.y+.5*o+e*o);"page"==t&&(sn.scrollTop+=Rt(i,!0).y-n.y),ut(i.line,i.ch,!0),Qn=n.x}function mt(e){var t=m(e.line).text,n=e.ch,r=e.ch;if(t){e.after===!1||r==t.length?--n:++r;for(var i=t.charAt(n),o=_(i)?_:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&_(e)};n>0&&o(t.charAt(n-1));)--n;for(;r<t.length&&o(t.charAt(r));)++r}return{from:{line:e.line,ch:n},to:{line:e.line,ch:r}}}function vt(e){lt({line:e,ch:0},ct({line:e+1,ch:0}))}function yt(e){if(U(Kn.from,Kn.to))return xt(Kn.from.line,e);for(var t=Kn.to.line-(Kn.to.ch?0:1),n=Kn.from.line;n<=t;++n)xt(n,e)}function xt(e,t){if(t||(t="add"),"smart"==t)if(Sn.indent)var n=jt(e);else t="prev";var r,i=m(e),o=i.indentation(tn.tabSize),l=i.text.match(/^\s*/)[0];"smart"==t&&(r=Sn.indent(n,i.text.slice(l.length),i.text),r==ye&&(t="prev")),"prev"==t?r=e?m(e-1).indentation(tn.tabSize):0:"add"==t?r=o+tn.indentUnit:"subtract"==t&&(r=o-tn.indentUnit),r=Math.max(0,r);var a="",s=0;if(tn.indentWithTabs)for(var u=Math.floor(r/tn.tabSize);u;--u)s+=tn.tabSize,a+="\t";s<r&&(a+=B(r-s)),a!=l&&Pe(a,{line:e,ch:0},{line:e,ch:l.length}),i.stateAfter=null}function Ct(){Sn=e.getMode(tn,tn.mode),Tn.iter(0,Tn.size,function(e){e.stateAfter=null}),An=0,_t(100)}function bt(){var e=tn.gutter||tn.lineNumbers;mn.style.display=e?"":"none",e?In=!0:un.parentNode.style.marginLeft=0}function St(e,t){if(tn.lineWrapping){Cn.className+=" CodeMirror-wrap";var n=xn.clientWidth/Kt()-3;Tn.iter(0,Tn.size,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/n)||1;1!=t&&M(e,t)}}),pn.style.minWidth=hn.style.left=""}else Cn.className=Cn.className.replace(" CodeMirror-wrap",""),Be(),Tn.iter(0,Tn.size,function(e){1==e.height||e.hidden||M(e,1)});Hn.push({from:0,to:Tn.size})}function kt(){xn.className=xn.className.replace(/\s*cm-s-\S+/g,"")+tn.theme.replace(/(^|\s)\s*/g," cm-s-")}function wt(){var e=oe[tn.keyMap].style;Cn.className=Cn.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function Mt(e,t){this.lines=[],this.type=e,t&&(this.style=t)}function Tt(e,t,n,r){e=ct(e),t=ct(t);var i=new Mt("range",n);if(r)for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);var l=e.line;return Tn.iter(l,t.line+1,function(n){var r={from:l==e.line?e.ch:null,to:l==t.line?t.ch:null,marker:i};n.markedSpans=(n.markedSpans||[]).concat([r]),i.lines.push(n),++l}),Hn.push({from:e.line,to:t.line+1}),i}function At(e){e=ct(e);var t=new Mt("bookmark"),n=m(e.line);er.addChange(e.line,1,[p(n.text,n.markedSpans)],!0);var r={from:e.ch,to:e.ch,marker:t};return n.markedSpans=(n.markedSpans||[]).concat([r]),t.lines.push(n),t}function Lt(e){e=ct(e);var t=[],n=m(e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker)}return t}function Nt(e,t,n){return"number"==typeof e&&(e=m(ft(e))),e.gutterMarker={text:t,style:n},In=!0,e}function Et(e){"number"==typeof e&&(e=m(ft(e))),e.gutterMarker=null,In=!0}function Wt(e,t){var n=e,r=e;return"number"==typeof e?r=m(ft(e)):n=b(e),null==n?null:t(r,n)?(Hn.push({from:n,to:n+1}),r):null}function Dt(e,t,n){return Wt(e,function(e){if(e.className!=t||e.bgClassName!=n)return e.className=t,e.bgClassName=n,!0})}function zt(e,t){return Wt(e,function(e,n){if(e.hidden!=t){e.hidden=t,tn.lineWrapping||(t&&e.text.length==Zn.text.length?_n=!0:!t&&e.text.length>Zn.text.length&&(Zn=e,_n=!1)),M(e,t?0:1);var r=Kn.from.line,i=Kn.to.line;if(t&&(r==n||i==n)){var o=r==n?st({line:r,ch:0},r,0):Kn.from,l=i==n?st({line:i,ch:0},i,0):Kn.to;if(!l)return;at(o,l)}return In=!0}})}function Ht(e){if("number"==typeof e){if(!g(e))return null;var t=e;if(e=m(e),!e)return null}else{var t=b(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}}function Ot(e,t){if(0==t)return{top:0,left:0};var n=L(e,t);$(dn,n);var r=n.anchor,i=r.offsetTop,o=r.offsetLeft;if(ae&&0==i&&0==o){var l=G("span","x");r.parentNode.insertBefore(l,r.nextSibling),i=l.offsetTop}return{top:i,left:o}}function Rt(e,t){var n,r=Pt(),i=r*(k(Tn,e.line)-(t?Yn:0));if(0==e.ch)n=0;else{var o=Ot(m(e.line),e.ch);n=o.left,tn.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function It(e,t){function n(e){var t=Ot(a,e);if(u){var n=Math.round(t.top/r);return h=n!=f,Math.max(0,t.left+(n-f)*xn.clientWidth)}return t.left}var r=Pt(),i=Kt(),o=Yn+Math.floor(t/r);if(o<0)return{line:0,ch:0};var l=S(Tn,o);if(l>=Tn.size)return{line:Tn.size-1,ch:m(Tn.size-1).text.length};var a=m(l),s=a.text,u=tn.lineWrapping,f=u?o-k(Tn,l):0;if(e<=0&&0==f)return{line:l,ch:0};for(var c,h=!1,d=0,p=0,g=s.length,v=Math.min(g,Math.ceil((e+f*xn.clientWidth*.9)/i));;){var y=n(v);if(!(y<=e&&v<g)){c=y,g=v;break}v=Math.min(g,Math.ceil(1.2*v))}if(e>c)return{line:l,ch:g};for(v=Math.floor(.8*g),y=n(v),y<e&&(d=v,p=y);;){if(g-d<=1){var x=e-p<c-e;return{line:l,ch:x?d:g,after:x}}var C=Math.ceil((d+g)/2),b=n(C);b>e?(g=C,c=b,h&&(c+=1e3)):(d=C,p=b)}}function Bt(e){var t=Rt(e,!0),n=R(pn);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function Pt(){if(null==fr){fr=G("pre");for(var e=0;e<49;++e)fr.appendChild(document.createTextNode("x")),fr.appendChild(G("br"));fr.appendChild(document.createTextNode("x"))}var t=un.clientHeight;return t==ur?sr:(ur=t,$(dn,fr.cloneNode(!0)),sr=dn.firstChild.offsetHeight/50||1,Y(dn),sr)}function Kt(){if(xn.clientWidth==dr)return cr;dr=xn.clientWidth;var e=G("span","x"),t=G("pre",[e]);return $(dn,t),cr=e.offsetWidth||10}function Ut(){return pn.offsetTop}function Ft(){return pn.offsetLeft}function Vt(e,t){var n,r,i=R(xn,!0);try{n=e.clientX,r=e.clientY}catch(e){return null}if(!t&&(n-i.left>xn.clientWidth||r-i.top>xn.clientHeight))return null;var o=R(pn,!0);return It(n-o.left,r-o.top)}function Gt(e){function t(){if(ln.style.position="relative",on.style.cssText=i,ue&&(sn.scrollTop=r),Ge(),null!=on.selectionStart){clearTimeout(hr);var e=on.value=" "+(U(Kn.from,Kn.to)?"":on.value),t=0;ar=" ",on.selectionStart=1,on.selectionEnd=e.length,hr=setTimeout(function n(){" "==ar&&0==on.selectionStart?Qt(ie.selectAll)(or):t++<10?hr=setTimeout(n,500):Xe()},200)}}var n=Vt(e),r=sn.scrollTop;if(n&&!de){(U(Kn.from,Kn.to)||F(n,Kn.from)||!F(n,Kn.to))&&Qt(ut)(n.line,n.ch);var i=on.style.cssText;if(ln.style.position="absolute",on.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",je(),Xe(!0),U(Kn.from,Kn.to)&&(on.value=ar=" "),le){N(e);var o=z(window,"mouseup",function(){o(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function Yt(){clearInterval(bn);var e=!0;cn.style.visibility="",bn=setInterval(function(){cn.style.visibility=(e=!e)?"":"hidden"},tn.cursorBlinkRate)}function $t(e){function t(e,t,n){if(e.text)for(var r,i=e.styles,o=l?0:e.text.length-1,s=l?0:i.length-2,u=l?i.length:-2;s!=u;s+=2*a){var f=i[s];if(i[s+1]==h){for(var c=l?0:f.length-1,g=l?f.length:-1;c!=g;c+=a,o+=a)if(o>=t&&o<n&&p.test(r=f.charAt(c))){var m=pr[r];if(">"==m.charAt(1)==l)d.push(r);else{if(d.pop()!=m.charAt(0))return{pos:o,match:!1};if(!d.length)return{pos:o,match:!0}}}}else o+=a*f.length}}var n=Kn.inverted?Kn.from:Kn.to,r=m(n.line),i=n.ch-1,o=i>=0&&pr[r.text.charAt(i)]||pr[r.text.charAt(++i)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=r.styles,u=i+1,f=0,c=s.length;f<c;f+=2)if((u-=s[f].length)<=0){var h=s[f+1];break}for(var d=[r.text.charAt(i)],p=/[(){}[\]]/,f=n.line,c=l?Math.min(f+100,Tn.size):Math.max(-1,f-100);f!=c;f+=a){var r=m(f),g=f==n.line,v=t(r,g&&l?i+1:0,g&&!l?i:r.text.length);if(v)break}v||(v={pos:null,match:!1});var h=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",y=Tt({line:n.line,ch:i},{line:n.line,ch:i+1},h),x=null!=v.pos&&Tt({line:f,ch:v.pos},{line:f,ch:v.pos+1},h),C=Qt(function(){y.clear(),x&&x.clear()});e?setTimeout(C,800):Pn=C}}function Xt(e){for(var t,n,r=e,i=e-40;r>i;--r){if(0==r)return 0;var o=m(r-1);if(o.stateAfter)return r;var l=o.indentation(tn.tabSize);(null==n||t>l)&&(n=r-1,t=l)}return n}function jt(e){var t=Xt(e),n=t&&m(t-1).stateAfter;return n=n?i(Sn,n):o(Sn),Tn.iter(t,e,function(r){r.process(Sn,n,tn.tabSize),r.stateAfter=t==e-1||t%5==0?i(Sn,n):null}),n}function Zt(){if(!(An>=Xn)){var e=+new Date+tn.workTime,t=i(Sn,jt(An)),n=An;Tn.iter(An,Xn,function(n){if(An>=$n?(n.highlight(Sn,t,tn.tabSize),n.stateAfter=i(Sn,t)):(n.process(Sn,t,tn.tabSize),n.stateAfter=An%5==0?i(Sn,t):null),++An,+new Date>e)return _t(tn.workDelay),!0}),Xn>n&&An>=$n&&Qt(function(){Hn.push({from:n,to:An})})()}}function _t(e){An<Xn&&Mn.set(e,Zt)}function Jt(){Dn=zn=On=null,Hn=[],Rn=!1,Bn=[]}function qt(){if(_n&&Be(),Jn&&!tn.lineWrapping){var e=hn.offsetWidth,t=Ot(Zn,Zn.text.length).left;se||(hn.style.left=t+"px",pn.style.minWidth=t+e+"px"),Jn=!1}var n,r;if(Rn){var i=_e();n=qe(i.x,i.y,i.x,i.yBot)}(Hn.length||n&&null!=n.scrollTop)&&(r=et(Hn,!0,n&&n.scrollTop)),r||(Rn&&it(),In&&rt()),n&&Ze(),Rn&&Yt(),kn&&(Dn===!0||Dn!==!1&&Rn)&&Xe(zn),Rn&&tn.matchBrackets&&setTimeout(Qt(function(){Pn&&(Pn(),Pn=null),U(Kn.from,Kn.to)&&$t(!1)}),20);var o=Rn,l=Bn;On&&tn.onChange&&or&&tn.onChange(or,On),o&&tn.onCursorActivity&&tn.onCursorActivity(or);for(var a=0;a<l.length;++a)l[a](or);r&&tn.onUpdate&&tn.onUpdate(or)}function Qt(e){return function(){gr++||Jt();try{var t=e.apply(this,arguments)}finally{--gr||qt()}return t}}function en(e){er.startCompound();try{return e()}finally{er.endCompound()}}var tn={},nn=e.defaults;for(var rn in nn)nn.hasOwnProperty(rn)&&(tn[rn]=(u&&u.hasOwnProperty(rn)?u:nn)[rn]);var on=G("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");on.setAttribute("wrap","off"),on.setAttribute("autocorrect","off"),on.setAttribute("autocapitalize","off");var ln=G("div",[on],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),an=G("div",null,"CodeMirror-scrollbar-inner"),sn=G("div",[an],"CodeMirror-scrollbar"),un=G("div"),fn=G("div",null,null,"position: relative; z-index: -1"),cn=G("pre"," ","CodeMirror-cursor"),hn=G("pre"," ","CodeMirror-cursor","visibility: hidden"),dn=G("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),pn=G("div",[dn,cn,hn,fn,un],null,"position: relative; z-index: 0"),gn=G("div",null,"CodeMirror-gutter-text"),mn=G("div",[gn],"CodeMirror-gutter"),vn=G("div",[mn,G("div",[pn],"CodeMirror-lines")],null,"position: relative"),yn=G("div",[vn],null,"position: relative"),xn=G("div",[yn],"CodeMirror-scroll");xn.setAttribute("tabIndex","-1");var Cn=G("div",[ln,sn,xn],"CodeMirror"+(tn.lineWrapping?" CodeMirror-wrap":""));l.appendChild?l.appendChild(Cn):l(Cn),kt(),wt(),J&&(on.style.width="0px"),ce||(xn.draggable=!0),pn.style.outline="none",null!=tn.tabindex&&(on.tabIndex=tn.tabindex),tn.autofocus&&je(),tn.gutter||tn.lineNumbers||(mn.style.display="none"),ge&&(ln.style.height="1px",ln.style.position="absolute"),me?(sn.style.zIndex=-2,sn.style.visibility="hidden"):se&&(sn.style.minWidth="18px");var bn,Sn,kn,wn=new H,Mn=new H,Tn=new x([new y([new v("")])]),An=0;Ct();var Ln,Nn,En,Wn,Dn,zn,Hn,On,Rn,In,Bn,Pn,Kn={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Un=0,Fn=!1,Vn=!1,Gn=!1,Yn=0,$n=0,Xn=0,jn=0,Zn=m(0),_n=!1,Jn=!0,qn=!1,Qn=null;Qt(function(){O(tn.value||""),Dn=!1})();var er=new w;z(xn,"mousedown",Qt(re)),z(xn,"dblclick",Qt(he)),z(pn,"selectstart",A),le||z(xn,"contextmenu",Gt),z(xn,"scroll",ee),z(sn,"scroll",Q),z(sn,"mousedown",function(){kn&&setTimeout(je,0)});var tr=z(window,"resize",function(){Cn.parentNode?et(!0):tr()},!0);z(on,"keyup",Qt(Le)),z(on,"input",Ye),z(on,"keydown",Qt(Te)),z(on,"keypress",Qt(Ae)),z(on,"focus",Ne),z(on,"blur",Ee),tn.dragDrop&&(z(xn,"dragstart",ve),z(xn,"dragenter",f),z(xn,"dragover",f),z(xn,"drop",Qt(pe))),z(xn,"paste",function(){je(),Ye()}),z(on,"paste",function(){Gn=!0,Ye()}),z(on,"cut",Qt(function(){tn.readOnly||Ke("")})),ge&&z(yn,"mouseup",function(){document.activeElement==on&&on.blur(),je()});var nr;try{nr=document.activeElement==on}catch(rr){}nr||tn.autofocus?setTimeout(Ne,20):Ee();var ir,or=Cn.CodeMirror={getValue:X,setValue:Qt(O),getSelection:Ve,replaceSelection:Qt(Ke),focus:function(){window.focus(),je(),Ne(),Ye()},setOption:function(e,t){var n=tn[e];tn[e]=t,"mode"==e||"indentUnit"==e?Ct():"readOnly"==e&&"nocursor"==t?(Ee(),on.blur()):"readOnly"!=e||t?"theme"==e?kt():"lineWrapping"==e&&n!=t?Qt(St)():"tabSize"==e?et(!0):"keyMap"==e?wt():"tabindex"==e&&(on.tabIndex=t):Xe(!0),"lineNumbers"!=e&&"gutter"!=e&&"firstLineNumber"!=e&&"theme"!=e&&"lineNumberFormatter"!=e||(bt(),et(!0))},getOption:function(e){return tn[e]},getMode:function(){return Sn},undo:Qt(ze),redo:Qt(He),indentLine:Qt(function(e,t){"string"!=typeof t&&(t=null==t?tn.smartIndent?"smart":"prev":t?"add":"subtract"),g(e)&&xt(e,t)}),indentSelection:Qt(yt),historySize:function(){return{undo:er.done.length,redo:er.undone.length}},clearHistory:function(){er=new w},setHistory:function(e){er=new w,er.done=e.done,er.undone=e.undone},getHistory:function(){function e(e){for(var t,n=0,r=[];n<e.length;++n){r.push(t=[]);for(var i=0,o=e[n];i<o.length;++i){var l=[],a=o[i];t.push({start:a.start,added:a.added,old:l});for(var s=0;s<a.old.length;++s)l.push(h(a.old[s]))}}return r}return{done:e(er.done),undone:e(er.undone)}},matchBrackets:Qt(function(){$t(!0)}),getTokenAt:Qt(function(e){return e=ct(e),m(e.line).getTokenAt(Sn,jt(e.line),tn.tabSize,e.ch)}),getStateAfter:function(e){return e=ft(null==e?Tn.size-1:e),jt(e+1)},cursorCoords:function(e,t){return null==e&&(e=Kn.inverted),this.charCoords(e?Kn.from:Kn.to,t)},charCoords:function(e,t){return e=ct(e),"local"==t?Rt(e,!1):"div"==t?Rt(e,!0):Bt(e)},coordsChar:function(e){var t=R(pn);return It(e.x-t.left,e.y-t.top)},defaultTextHeight:function(){return Pt()},markText:Qt(Tt),setBookmark:At,findMarksAt:Lt,setMarker:Qt(Nt),clearMarker:Qt(Et),setLineClass:Qt(Dt),hideLine:Qt(function(e){return zt(e,!0)}),showLine:Qt(function(e){return zt(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!g(e))return null;e=m(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:Ht,getViewport:function(){return{from:$n,to:Xn}},addWidget:function(e,t,n,r,i){e=Rt(ct(e));var o=e.yBot,l=e.x;if(t.style.position="absolute",yn.appendChild(t),"over"==r)o=e.y;else if("near"==r){var a=Math.max(xn.offsetHeight,Tn.height*Pt()),s=Math.max(yn.clientWidth,pn.clientWidth)-Ft();e.yBot+t.offsetHeight>a&&e.y>t.offsetHeight&&(o=e.y-t.offsetHeight),l+t.offsetWidth>s&&(l=s-t.offsetWidth)}t.style.top=o+Ut()+"px",t.style.left=t.style.right="","right"==i?(l=yn.clientWidth-t.offsetWidth,
t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(yn.clientWidth-t.offsetWidth)/2),t.style.left=l+Ft()+"px"),n&&Je(l,o,l+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return Tn.size},clipPos:ct,getCursor:function(e){return null==e&&(e=Kn.inverted),V(e?Kn.from:Kn.to)},somethingSelected:function(){return!U(Kn.from,Kn.to)},setCursor:Qt(function(e,t,n){null==t&&"number"==typeof e.line?ut(e.line,e.ch,n):ut(e,t,n)}),setSelection:Qt(function(e,t,n){(n?lt:at)(ct(e),ct(t||e))}),getLine:function(e){if(g(e))return m(e).text},getLineHandle:function(e){if(g(e))return m(e)},setLine:Qt(function(e,t){g(e)&&Pe(t,{line:e,ch:0},{line:e,ch:m(e).text.length})}),removeLine:Qt(function(e){g(e)&&Pe("",{line:e,ch:0},ct({line:e+1,ch:0}))}),replaceRange:Qt(Pe),getRange:function(e,t,n){return Fe(ct(e),ct(t),n)},triggerOnKeyDown:Qt(Te),execCommand:function(e){return ie[e](or)},moveH:Qt(dt),deleteH:Qt(pt),moveV:Qt(gt),toggleOverwrite:function(){Fn?(Fn=!1,cn.className=cn.className.replace(" CodeMirror-overwrite","")):(Fn=!0,cn.className+=" CodeMirror-overwrite")},posFromIndex:function(e){var t,n=0;return Tn.iter(0,Tn.size,function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),ct({line:n,ch:t})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return Tn.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){null!=e&&(xn.scrollLeft=e),null!=t&&(sn.scrollTop=xn.scrollTop=t),et([])},getScrollInfo:function(){return{x:xn.scrollLeft,y:sn.scrollTop,height:sn.scrollHeight,width:xn.scrollWidth}},scrollIntoView:function(e){var t=Rt(e?ct(e):Kn.inverted?Kn.from:Kn.to);Je(t.x,t.y,t.x,t.yBot)},setSize:function(e,t){function n(e){return e=String(e),/^\d+$/.test(e)?e+"px":e}null!=e&&(Cn.style.width=n(e)),null!=t&&(xn.style.height=n(t)),or.refresh()},operation:function(e){return Qt(e)()},compoundChange:function(e){return en(e)},refresh:function(){et(!0,null,Un),sn.scrollHeight>Un&&(sn.scrollTop=Un)},getInputField:function(){return on},getWrapperElement:function(){return Cn},getScrollerElement:function(){return xn},getGutterElement:function(){return mn}},lr=null,ar="";Mt.prototype.clear=Qt(function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=a(r.markedSpans,this);null!=i.from&&(e=b(r)),null!=i.to&&(t=b(r)),r.markedSpans=s(r.markedSpans,i)}null!=e&&Hn.push({from:e,to:t+1}),this.lines.length=0,this.explicitlyCleared=!0}),Mt.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=a(r.markedSpans,this);if(null!=i.from||null!=i.to){var o=b(r);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}};var sr,ur,fr,cr,hr,dr=0,pr={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},gr=0;for(var mr in te)te.propertyIsEnumerable(mr)&&!or.propertyIsEnumerable(mr)&&(or[mr]=te[mr]);for(var vr=0;vr<ne.length;++vr)ne[vr](or);return or}function t(e){return"string"==typeof e?oe[e]:e}function n(e,n,r,i,o){function l(n){n=t(n);var r=n[e];if(r===!1)return o&&o(),!0;if(null!=r&&i(r))return!0;if(n.nofallthrough)return o&&o(),!0;var a=n.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return l(a);for(var s=0,u=a.length;s<u;++s)if(l(a[s]))return!0;return!1}return!(!n||!l(n))||l(r)}function r(e){var t=Me[D(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function o(e,t,n){return!e.startState||e.startState(t,n)}function l(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function a(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function s(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function u(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],l=o.marker,a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(a||"bookmark"==l.type&&o.from==t&&o.from!=n){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push({from:o.from,to:s?null:o.to,marker:l})}}return r}function f(e,t){if(e)for(var n,r=0;r<e.length;++r){var i=e[r],o=i.marker,l=null==i.to||(o.inclusiveRight?i.to>=t:i.to>t);if(l||"bookmark"==o.type&&i.from==t){var a=null==i.from||(o.inclusiveLeft?i.from<=t:i.from<t);(n||(n=[])).push({from:a?null:i.from-t,to:null==i.to?null:i.to-t,marker:o})}}return n}function c(e,t,n,r,i){if(!e&&!t)return i;var o=u(e,n),l=f(t,r),s=1==i.length,c=P(i).length+(s?n:0);if(o)for(var h=0;h<o.length;++h){var d=o[h];if(null==d.to){var g=a(l,d.marker);g?s&&(d.to=null==g.to?null:g.to+c):d.to=n}}if(l)for(var h=0;h<l.length;++h){var d=l[h];if(null!=d.to&&(d.to+=c),null==d.from){var g=a(o,d.marker);g||(d.from=c,s&&(o||(o=[])).push(d))}else d.from+=c,s&&(o||(o=[])).push(d)}var m=[p(i[0],o)];if(!s){var v,y=i.length-2;if(y>0&&o)for(var h=0;h<o.length;++h)null==o[h].to&&(v||(v=[])).push({from:null,to:null,marker:o[h].marker});for(var h=0;h<y;++h)m.push(p(i[h+1],v));m.push(p(P(i),l))}return m}function h(e){return"string"==typeof e?e:e.text}function d(e){if("string"==typeof e)return null;for(var t=e.markedSpans,n=null,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function p(e,t){return t?{text:e,markedSpans:t}:e}function g(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=Z(r,e);r.splice(i,1)}e.markedSpans=null}}function m(e,t){if(t){for(var n=0;n<t.length;++n){t[n].marker.lines.push(e)}e.markedSpans=t}}function v(e,t){this.text=e,this.height=1,m(this,t)}function y(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function x(e){this.children=e;for(var t=0,n=0,r=0,i=e.length;r<i;++r){var o=e[r];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function C(e,t){for(;!e.lines;)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function b(e){if(null==e.parent)return null;for(var t=e.parent,n=Z(t.lines,e),r=t.parent;r;t=r,r=r.parent){var i=0;for(r.children.length;r.children[i]!=t;++i)n+=r.children[i].chunkSize()}return n}function S(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var o=e.children[r],l=o.height;if(t<l){e=o;continue e}t-=l,n+=o.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var a=e.lines[r],s=a.height;if(t<s)break;t-=s}return n+r}function k(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var o=e.children[r],l=o.chunkSize();if(t<l){e=o;continue e}t-=l,n+=o.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function w(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function M(){N(this)}function T(e){return e.stop||(e.stop=M),e}function A(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function L(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function N(e){A(e),L(e)}function E(e){return e.target||e.srcElement}function W(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),q&&e.ctrlKey&&1==t&&(t=3),t}function D(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function z(e,t,n,r){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};if(e.attachEvent("on"+t,i),r)return function(){e.detachEvent("on"+t,i)}}}function H(){this.id=null}function O(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)"\t"==e.charAt(r)?i+=n-i%n:++i;return i}function R(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var i=document.documentElement||document.body.parentNode;null==i.scrollTop&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n}function I(e){return e.textContent||e.innerText||e.nodeValue||""}function B(e){for(;be.length<=e;)be.push(P(be)+" ");return be[e]}function P(e){return e[e.length-1]}function K(e){J?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function U(e,t){return e.line==t.line&&e.ch==t.ch}function F(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function V(e){return{line:e.line,ch:e.ch}}function G(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)X(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Y(e){return e.innerHTML="",e}function $(e,t){Y(e).appendChild(t)}function X(e,t){ue?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function j(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0&&e.charAt(n)==t.charAt(r);--n,--r);return r+1}function Z(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function _(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Se.test(e))}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}};var J=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),q=J||/Mac/.test(navigator.platform),Q=(/Win/.test(navigator.platform),e.modes={}),ee=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}Q[t]=n},e.defineMIME=function(e,t){ee[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ee.hasOwnProperty(t))t=ee[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=Q[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(re.hasOwnProperty(n.name)){var o=re[n.name];for(var l in o)o.hasOwnProperty(l)&&(i[l]=o[l])}return i.name=n.name,i},e.listModes=function(){var e=[];for(var t in Q)Q.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in ee)ee.propertyIsEnumerable(t)&&e.push({mime:t,mode:ee[t]});return e};var te=e.extensions={};e.defineExtension=function(e,t){te[e]=t};var ne=[];e.defineInitHook=function(e){ne.push(e)};var re=e.modeExtensions={};e.extendMode=function(e,t){var n=re.hasOwnProperty(e)?re[e]:re[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])};var ie=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!U(t,n);r||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,r?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("\t","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},oe=e.keyMap={};oe.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},oe.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},oe.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},oe["default"]=q?oe.macDefault:oe.pcDefault,oe.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=r,e.fromTextArea=function(t,n){function r(){t.value=s.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),null==n.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form){var l=z(t.form,"submit",r,!0),a=t.form.submit;t.form.submit=function u(){r(),t.form.submit=a,t.form.submit(),t.form.submit=u}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=r,s.getTextArea=function(){return t},s.toTextArea=function(){r(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(l(),"function"==typeof t.form.submit&&(t.form.submit=a))},s};var le=/gecko\/\d{7}/i.test(navigator.userAgent),ae=/MSIE \d/.test(navigator.userAgent),se=/MSIE [1-7]\b/.test(navigator.userAgent),ue=/MSIE [1-8]\b/.test(navigator.userAgent),fe=ae&&5==document.documentMode,ce=/WebKit\//.test(navigator.userAgent),he=/Chrome\//.test(navigator.userAgent),de=/Opera\//.test(navigator.userAgent),pe=/Apple Computer/.test(navigator.vendor),ge=/KHTML\//.test(navigator.userAgent),me=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);e.copyState=i,e.startState=o,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}},l.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return O(this.string,this.start,this.tabSize)},indentation:function(){return O(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string).indexOf(i(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=l;var ve=" ";le||ae&&!se?ve="​":de&&(ve=""),v.prototype={update:function(e,t){this.text=e,this.stateAfter=this.styles=null,g(this),m(this,t)},highlight:function(e,t,n){var r=new l(this.text,n),i=this.styles||(this.styles=[]),o=i.length=0;for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var a=e.token(r,t),s=r.current();if(r.start=r.pos,o&&i[o-1]==a?i[o-2]+=s:s&&(i[o++]=s,i[o++]=a),r.pos>5e3){i[o++]=this.text.slice(r.pos),i[o++]=null;break}}},process:function(e,t,n){var r=new l(this.text,n);for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol()&&r.pos<=5e3;)e.token(r,t),r.start=r.pos},getTokenAt:function(e,t,n,r){for(var i=this.text,o=new l(i,n);o.pos<r&&!o.eol();){o.start=o.pos;var a=e.token(o,t)}return{start:o.start,end:o.pos,string:o.current(),className:a||null,state:t}},indentation:function(e){return O(this.text,null,e)},getContent:function(e,t,n){function r(t,n,r){if(n){if(o&&ae&&" "==n.charAt(0)&&(n=" "+n.slice(1)),o=!1,a.test(n))for(var i=document.createDocumentFragment(),s=0;;){a.lastIndex=s;var u=a.exec(n),f=u?u.index-s:n.length-s;if(f&&(i.appendChild(document.createTextNode(n.slice(s,s+f))),l+=f),!u)break;if(s+=f+1,"\t"==u[0]){var c=e-l%e;i.appendChild(G("span",B(c),"cm-tab")),l+=c}else{var h=G("span","•","cm-invalidchar");h.title="\\u"+u[0].charCodeAt(0).toString(16),i.appendChild(h),l+=1}}else{l+=n.length;var i=document.createTextNode(n)}r?t.appendChild(G("span",[i],r)):t.appendChild(i)}}function i(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}var o=!0,l=0,a=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,s=G("pre"),u=r;if(null!=t){var f=0,c=s.anchor=G("span");u=function(e,i,o){var l=i.length;if(t>=f&&t<f+l){var a=t-f;if(a&&(r(e,i.slice(0,a),o),n)){var s=i.slice(a-1,a+1);Ce.test(s)?e.appendChild(G("wbr")):!se&&/\w\w/.test(s)&&e.appendChild(document.createTextNode("‍"))}e.appendChild(c),r(c,de?i.slice(a,a+1):i.slice(a),o),de&&r(e,i.slice(a+1),o),t--,f+=l}else f+=l,r(e,i,o),f==t&&f==g?(X(c,ve),e.appendChild(c)):f>t+10&&/\s/.test(i)&&(u=function(){})}}var h=this.styles,d=this.text,p=this.markedSpans,g=d.length;if(d||null!=t)if(p&&p.length){p.sort(function(e,t){return e.from-t.from});for(var m,v=0,y=0,x="",C=p[0].from||0,b=[],S=0,k=function(){for(var e;S<p.length&&((e=p[S]).from==v||null==e.from);)"range"==e.marker.type&&b.push(e),++S;C=S<p.length?p[S].from:1/0;for(var t=0;t<b.length;++t){var n=b[t].to;null==n&&(n=1/0),n==v?b.splice(t--,1):C=Math.min(n,C)}};v<g;){C==v&&k();for(var w=Math.min(g,C);;){if(x){for(var M=v+x.length,T=m,A=0;A<b.length;++A){var L=b[A];T=(T?T+" ":"")+L.marker.style,L.marker.endStyle&&L.to===Math.min(M,w)&&(T+=" "+L.marker.endStyle),L.marker.startStyle&&L.from===v&&(T+=" "+L.marker.startStyle)}if(u(s,M>w?x.slice(0,w-v):x,T),M>=w){x=x.slice(w-v),v=w;break}v=M}x=h[y++],m=i(h[y++])}}}else for(var y=0,N=0;N<g;y+=2){var E=h[y],m=h[y+1],W=E.length;N+W>g&&(E=E.slice(0,g-N)),N+=W,u(s,E,i(m))}else u(s," ");return s},cleanUp:function(){this.parent=null,g(this)}},y.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var o=this.lines[r];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var l=0;l<o.handlers.length;++l)n.push(o.handlers[l])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},x.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e),a=i.height;if(i.remove(e,l,n),this.height-=a-i.height,o==l&&(this.children.splice(r--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25){var s=[];this.collapse(s),this.children=[new y(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var o=this.children[r],l=o.chunkSize();if(e<=l){if(o.insertHeight(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),s=new y(a);o.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new x(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=Z(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new x(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var o=this.children[r],l=o.chunkSize();if(e<l){var a=Math.min(t,l-e);if(o.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=l}}},w.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+new Date,i=P(this.done),o=i&&P(i),l=r-this.time;if(i&&!this.closed&&this.compound)i.push({start:e,added:t,old:n});else if(l>400||!o||this.closed||o.start>e+n.length||o.start+o.added<e)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{for(var a=Math.max(0,o.start-e),s=Math.max(0,e+n.length-(o.start+o.added)),u=a;u>0;--u)o.old.unshift(n[u-1]);for(var u=s;u>0;--u)o.old.push(n[n.length-u]);a&&(o.start=e),o.added+=t-(n.length-a-s)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},e.e_stop=N,e.e_preventDefault=A,e.e_stopPropagation=L,e.connect=z,H.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var ye=e.Pass={toString:function(){return"CodeMirror.Pass"}},xe=function(){if(ue)return!1;var e=G("div");return"draggable"in e||"dragDrop"in e}(),Ce=(function(){var e=G("textarea");return e.value="foo\nbar",e.value.indexOf("\r")>-1?"\r\n":"\n"}(),/^$/);le?Ce=/$'/:pe?Ce=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:he&&(Ce=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var be=[""],Se=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,ke=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");l!=-1?(n.push(o.slice(0,l)),t+=l+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=ke;var we=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Me={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=Me,function(){for(var e=0;e<10;e++)Me[e+48]=String(e);for(var e=65;e<=90;e++)Me[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Me[e+111]=Me[e+63235]="F"+e}(),e.version="2.36",e}();